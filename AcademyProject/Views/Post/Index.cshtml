@model IEnumerable<Post>
@inject SignInManager<Models.Models.User> singInManager;

<html>
<head>
    @{ ViewData["Title"] = "Posts"; }

    <style>
        .container {
            display: inline-block;
        }

        .postCard {
            display: inline-block;
            text-align: center;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            max-height: 800px;
            max-width: 800px;
            margin-left: 25%;
            margin-top: 3%;
            font-family: arial;
        }

            .postCard:hover {
                transform: translateY(-30px);
            }

        .postCard {
            width: 600px;
            height: 300px;
        }

            .postCard h1, p {
                color: black;
            }
    </style>
</head>

<body>
    <a class="btn btn-outline-danger" asp-action="Create">Add new post</a>
    <div class="container">
        @foreach (var item in Model)
        {
        <div class="postCard">
            <h1>@item.Title</h1>
            <p>By:@item.Context</p>
            <p>Desc:@item.UserName</p>
            <a class="btn btn-outline-danger" asp-action="LeaveComment">Leave comment</a>
        </div>

            <div class="col-md-12">
                <section class="box">
                    <h5>Comments:</h5>
                    <button id="comments" class="btn btn-danger">Show me comments</button>
                    <div id="commentContent">

                    </div>
                </section>
            </div>
        }
    </div>
</body>
</html>

@section Scripts{
    <script>
        $("#comments").on("click", function () {
            $.ajax({
                method: "GET",
                url: "Post/GetComments",
                success: function (data) {
                    $("#commentContent").html(data);
                },
                error: function (err) {
                    alert(err);
                }
            });
        })
    </script>
}